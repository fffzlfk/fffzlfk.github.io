<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=zh-cn dir=ltr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>SQL - fffzlfk's Blog</title>
<meta name=theme-color><meta name=description content="SQL 语句"><meta name=author content="fffzlfk"><link rel="preload stylesheet" as=style href=https://fffzlfk.github.io/main.min.css><link rel=preload as=image href=https://fffzlfk.github.io/theme.svg><link rel=preload as=image href="https://avatars.githubusercontent.com/u/44939690?v=4"><link rel=preload as=image href=https://fffzlfk.github.io/github.svg><link rel=preload as=image href=https://fffzlfk.github.io/instagram.svg><link rel=preload as=image href=https://fffzlfk.github.io/rss.svg><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",()=>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1}))</script><link rel=icon href=https://fffzlfk.github.io/favicon.ico><link rel=apple-touch-icon href=https://fffzlfk.github.io/apple-touch-icon.png><meta name=generator content="Hugo 0.147.4"><meta itemprop=name content="SQL"><meta itemprop=description content="SQL 语句"><meta itemprop=datePublished content="2020-10-24T20:22:42+08:00"><meta itemprop=dateModified content="2020-10-24T20:22:42+08:00"><meta itemprop=wordCount content="510"><meta itemprop=keywords content="SQL,Academic"><meta property="og:url" content="https://fffzlfk.github.io/posts/sql/"><meta property="og:site_name" content="fffzlfk's Blog"><meta property="og:title" content="SQL"><meta property="og:description" content="SQL 语句"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-24T20:22:42+08:00"><meta property="article:modified_time" content="2020-10-24T20:22:42+08:00"><meta property="article:tag" content="SQL"><meta property="article:tag" content="Academic"><meta name=twitter:card content="summary"><meta name=twitter:title content="SQL"><meta name=twitter:description content="SQL 语句"><link rel=canonical href=https://fffzlfk.github.io/posts/sql/></head><body class="bg-(--bg) text-black antialiased duration-200 ease-out [-webkit-tap-highlight-color:transparent] dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-(--w) px-8 whitespace-nowrap lg:justify-center"><div class="relative z-50 flex items-center ltr:mr-auto rtl:ml-auto"><a class="-translate-y-[1px] text-2xl font-medium" href=https://fffzlfk.github.io/>fffzlfk's Blog</a><div class="btn-dark text-[0px] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden ltr:-mr-8 rtl:-ml-8" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full flex-col justify-center bg-(--bg) pb-16 duration-200 select-none lg:static lg:h-auto lg:flex-row lg:bg-transparent! lg:pb-0 lg:transition-none"><nav class="mt-12 flex justify-center space-x-10 lg:mt-0 lg:items-center ltr:lg:ml-14 rtl:space-x-reverse rtl:lg:mr-14 dark:invert"><a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/fffzlfk target=_blank rel=me>github</a>
<a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/fffzlfk target=_blank rel=me>instagram</a>
<a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://fffzlfk.github.io/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral dark:prose-invert relative mx-auto min-h-[calc(100vh-9rem)] max-w-(--w) px-8 pt-14 pb-16"><article><header class=mb-14><h1 class="my-0! pb-2.5">SQL</h1><div class="text-xs antialiased opacity-60"><time>Oct 24, 2020</time></div></header><section><h2 id=sql概述>SQL概述</h2><h3 id=sql的特点>SQL的特点</h3><ol><li><strong>综合统一</strong>：集DQ、DDL、DML、DCL于一体</li><li><strong>高度非过程化</strong>：不用考虑如何实现，只需提出“做什么”，不关心“怎么做”</li><li><strong>面向集合的操作方式</strong>：查询、插入、删除、更新操作对象及结果都是集合</li><li><strong>以同一种语法结构提供两种使用方法</strong>：可交互式和嵌入式使用</li><li><strong>以简捷的自然语言实现对数据库的定义、操作和控制功能</strong>：定义了少量的关键字实现对数据库的定义、操纵和控制功能</li></ol><h3 id=sql所使用的动词核心功能>SQL所使用的动词（核心功能）</h3><table><thead><tr><th>SQL功能</th><th>动词</th></tr></thead><tbody><tr><td>数据查询</td><td>SELECT</td></tr><tr><td>数据定义</td><td>CREATE, DROP, ALTER</td></tr><tr><td>数据操作</td><td>INSERT, UPDATE, DELETE</td></tr><tr><td>数据控制</td><td>GRANT, REVOKE</td></tr></tbody></table><h2 id=数据定义>数据定义</h2><h3 id=sql的数据定义语句>SQL的数据定义语句</h3><p><img src=https://i.postimg.cc/3JJJHQR6/1.png alt></p><h3 id=sql中的数据类型>SQL中的数据类型</h3><p><img src=https://i.postimg.cc/BbdCGB3Q/2.png alt></p><h3 id=基本表的定义>基本表的定义</h3><h4 id=创建基本表>创建基本表</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    	　  ( <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列级完整性约束条件</span><span style=color:#f92672>&gt;</span>]
</span></span><span style=display:flex><span>      　　[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列级完整性约束条件</span><span style=color:#f92672>&gt;</span>] ] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span>      　　[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表级完整性约束条件</span><span style=color:#f92672>&gt;</span> ]  ) ;
</span></span></code></pre></div><ul><li>常用的完整性约束<ul><li>主码约束：<strong>PRIMARY KEY (&lt;列名1>, &lt;列名2>,…)</strong></li><li>非空值约束：<strong>NOT NULL</strong></li><li>唯一性约束：<strong>UNIQUE</strong></li><li>参照完整性约束：<strong>FOREIGN KEY (&lt;列名>) REFERENCES &lt;表名>(&lt;列名>)</strong></li><li>一般性约束：<strong>CHECK(&lt;谓词>)</strong></li></ul></li></ul><p><img src=https://i.postimg.cc/k5M65Y7Y/3.png alt></p><h4 id=删除基本表>删除基本表</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span>  <span style=color:#66d9ef>TABLE</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span> [<span style=color:#66d9ef>RESTRICT</span><span style=color:#f92672>|</span><span style=color:#66d9ef>CASCADE</span>]; 
</span></span></code></pre></div><ul><li><p><strong>RESTRICT</strong>：删除表是有限制的：</p><ul><li>欲删除的基本表不能被其他表的约束所引用</li><li>如果存在依赖该表的对象，则此表不能被删除</li></ul></li><li><p><strong>CASCADE</strong>：级联，删除该表没有限制。
在删除基本表的同时，相关的依赖对象一起删除</p><p>&#9888;&#xfe0f;<strong>缺省是RESTRICT</strong></p></li></ul><h4 id=修改基本表>修改基本表</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ADD</span>[<span style=color:#66d9ef>COLUMN</span>] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>新列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span> [ <span style=color:#960050;background-color:#1e0010>完整性约束</span> ]]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ADD</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表级完整性约束</span><span style=color:#f92672>&gt;</span>]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>DROP</span> [ <span style=color:#66d9ef>COLUMN</span> ] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> [<span style=color:#66d9ef>CASCADE</span><span style=color:#f92672>|</span><span style=color:#66d9ef>RESTRICT</span>]]
</span></span><span style=display:flex><span>    [<span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>CONSTRAINT</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>完整性约束名</span><span style=color:#f92672>&gt;</span>[<span style=color:#66d9ef>RESTRICT</span><span style=color:#f92672>|</span><span style=color:#66d9ef>CASCADE</span>]]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>COLUMN</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>];
</span></span></code></pre></div><ul><li>&lt;表名>：要修改的基本表</li><li><strong>ADD子句</strong>：增加新列和新的完整性约束条件</li><li><strong>DROP COLUMN子句</strong>: 用于删除表中的列</li><li><strong>DROP CONSTRAINT</strong>子句：删除指定的完整性约束条件</li><li><strong>ALTER COLUMN</strong>子句：用于修改列名和数据类型</li></ul><p>&#9888;&#xfe0f;删除属性列</p><ul><li>间接删除(由DBA或表的Owner操作)<ol><li>把表中要保留的列及其内容复制到一个新表中</li><li>删除原表</li><li>再将新表重命名为原表名</li></ol></li><li>直接删除(SQL-99)<br>　例：ALTER TABLE S Drop Scome ;</li></ul><h3 id=索引的定义>索引的定义</h3><h4 id=索引的分类>索引的分类</h4><ol><li><strong>普通索引(Normal Index)</strong>：一个索引值可能对应多条存储记录</li><li><strong>单一索引(Unique Index)</strong>：每一个索引值只对应唯一的数据记录。</li><li><strong>聚簇索引(Cluster Index)</strong>：基本表按照索引项顺序组织存储。<ul><li>一个基本表上最多只能建立一个聚簇索引</li><li>在最经常查询的列上建立聚簇索引</li><li>经常更新的列不宜建立聚簇索引</li></ul></li></ol><h4 id=创建索引>创建索引</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> [<span style=color:#66d9ef>UNIQUE</span>] <span style=color:#f92672>|</span> [<span style=color:#66d9ef>CLUSTER</span>] <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>索引名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span> 	　<span style=color:#66d9ef>ON</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>(<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>次序</span><span style=color:#f92672>&gt;</span>][,<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>次序</span><span style=color:#f92672>&gt;</span>] ]<span style=color:#960050;background-color:#1e0010>…</span>);
</span></span></code></pre></div><ul><li>用&lt;表名>指定要建索引的基本表名字</li><li>索引可以建立在该表的一列或多列上，各列名之间用逗号分隔</li><li>用&lt;次序>指定索引值的排列次序。升序：ASC，降序：DESC，缺省值：ASC</li><li>UNIQUE表明此索引的每一个索引值对应唯一的数据记录</li><li>CLUSTER表示要建立的索引是聚簇索引</li></ul><p>例7: 为学生表S和选课表SC建立索引。其中S表按学号升序建唯一索引，按年龄降序建立普通索引，SC表按学号升序和课程号降序建唯一索引。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>INDEX</span> Stusno <span style=color:#66d9ef>ON</span> S (Sno);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> Stusage <span style=color:#66d9ef>ON</span> S (Sage <span style=color:#66d9ef>DESC</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>INDEX</span> SCno 
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>ON</span> SC(Sno <span style=color:#66d9ef>ASC</span>, Cno <span style=color:#66d9ef>DESC</span>);
</span></span></code></pre></div><h4 id=删除索引>删除索引</h4><p><strong>DROP INDEX &lt;索引名>;</strong></p><h4 id=修改索引>修改索引</h4><p><strong>ALTER INDEX &lt;旧索引名> RENAME TO &lt;新索引名>;</strong></p><h2 id=数据查询>数据查询</h2><ul><li><p>查询语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> [<span style=color:#66d9ef>ALL</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DISTINCT</span>] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>目标列表达式</span><span style=color:#f92672>&gt;</span> [,<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>目标列表达式</span><span style=color:#f92672>&gt;</span>] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名或视图名</span><span style=color:#f92672>&gt;</span>[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名或视图名</span><span style=color:#f92672>&gt;</span> ] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>WHERE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ]
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> [ <span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ] ]
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;</span> [ <span style=color:#66d9ef>ASC</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DESC</span> ] ] ;
</span></span></code></pre></div></li></ul><h3 id=单表查询>单表查询</h3><ul><li><p>目标列为表达式的查询</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, <span style=color:#ae81ff>1996</span> <span style=color:#f92672>-</span> Sage
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student ;
</span></span></code></pre></div></li><li><p>使用别名改变查询结果的列标题</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname  NAME, <span style=color:#e6db74>&#39;Year of Birth:&#39;</span>  BIRTH,
</span></span><span style=display:flex><span>		<span style=color:#ae81ff>1996</span> <span style=color:#f92672>-</span> Sage  BIRTHYEAR, 
</span></span><span style=display:flex><span>		ISLOWER ( Sdept )  DEPARTMENT
</span></span></code></pre></div></li><li><p>消除结果中重复的行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span> <span style=color:#66d9ef>SELECT</span>  <span style=color:#f92672>**</span><span style=color:#66d9ef>DISTINCT</span><span style=color:#f92672>**</span>  Sno <span style=color:#66d9ef>FROM</span>  SC ;
</span></span></code></pre></div></li><li><p>限定查询范围</p><table><thead><tr><th>查询条件</th><th>谓　词</th></tr></thead><tbody><tr><td>比　　较</td><td>= , &lt; , > , &lt;= , >= , &lt;> , != , !> , !&lt; ; NOT + 上述比较符</td></tr><tr><td>确定范围</td><td>BETWEEN … AND … , NOT BETWEEN … AND …</td></tr><tr><td>确定集合</td><td>IN, NOT IN</td></tr><tr><td>字符匹配</td><td>LIKE, NOT LIKE</td></tr><tr><td>空　　值</td><td>IS NULL, IS NOT NULL</td></tr><tr><td>多重条件</td><td>AND, OR -</td></tr></tbody></table><ul><li><p>确定范围</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, Sdept, Sage
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Sage  <span style=color:#66d9ef>BETWEEN</span>  <span style=color:#ae81ff>20</span>  <span style=color:#66d9ef>AND</span>  <span style=color:#ae81ff>23</span> ;
</span></span></code></pre></div></li><li><p>确定集合</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, Ssex
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Sdept  <span style=color:#66d9ef>NOT</span>  <span style=color:#66d9ef>IN</span> (<span style=color:#e6db74>&#39;IS&#39;</span>, <span style=color:#e6db74>&#39;MA&#39;</span>, <span style=color:#e6db74>&#39;CS&#39;</span>) ;
</span></span></code></pre></div></li><li><p>字符串匹配</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>[<span style=color:#66d9ef>NOT</span>] <span style=color:#66d9ef>LIKE</span>  <span style=color:#960050;background-color:#1e0010>‘</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>匹配模板</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>’</span>  [<span style=color:#66d9ef>ESCAPE</span> <span style=color:#960050;background-color:#1e0010>‘</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>换码字符</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>’</span>]
</span></span></code></pre></div><ul><li><p><strong>%(百分号)：代表任意长度(可以为0)的字符串。</strong></p><p>例：a%b表示以a开头，以b结尾的任意长度的字符串。如acb，addgb，ab 等都满足该匹配串。</p></li><li><p><strong>_(下横线)：代表任意单个字符。</strong></p><p>例：a_b表示以a开头，以b结尾的长度为3的任意字符串。如acb，afb等都满足该匹配串，一个汉字两个下横线</p></li><li><p><strong>当要查询的字符串本身就含有 % 或 _ 时，要使用 <code>ESCAPE '&lt;换码字符>'</code>短语对通配符进行转义。</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Cno, Ccredit
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Course
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Cname  <span style=color:#66d9ef>LIKE</span>  <span style=color:#e6db74>&#39;DB\_Design&#39;</span>  <span style=color:#66d9ef>ESCAPE</span> <span style=color:#e6db74>&#39;\&#39;</span> ;
</span></span><span style=display:flex><span>;<span style=color:#960050;background-color:#1e0010>转义符‘\’表示模板中出现在其后的第一个字符不再是通配符，而是字符本身。</span>
</span></span></code></pre></div></li></ul></li><li><p>涉及空值的查询</p><p><strong>使用谓词 IS NULL 或 IS NOT NULL，“IS NULL” 不能用 “= NULL” 代替！</strong></p></li></ul></li><li><p>排序输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
</span></span></code></pre></div><ul><li><strong>升序：ASC ，排列为空值的元组最后显示 （空值最大）</strong></li><li><strong>降序：DESC</strong></li></ul></li><li><p>聚集函数</p><ul><li>计数 COUNT (使用 DISTINCT 避免重复计数)</li><li>计算总和 SUM</li><li>计算平均值 AVG</li><li>求最大值 MAX</li><li>求最小值 MIN</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>[ <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span>[, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>…</span>] [ <span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ] ] 
</span></span></code></pre></div><p>未对查询结果分组，集函数将作用于整个查询结果</p><p>对查询结果分组后，集函数将分别作用于每个组</p><p>&#9888;&#xfe0f;<strong>使用GROUP BY子句后，SELECT子句的列名表中只能出现分组属性和集函数</strong></p><p>集函数只能用于SELECT子句和 HAVING短语之中，而<strong>绝对不能出现在 WHERE 子句</strong>中(WHERE子句执行过程是对记录逐一检验，并没有结果集，故无法施加集函数)。</p><p><img src=https://media.sumblog.cn/blog/20181223/nPMQrirY1FGp.png?imageMogr2/thumbnail/!60p alt></p></li></ul><h3 id=连接查询>连接查询</h3><ul><li><p>等值连接、自然连接</p><p>SELECT子句和WHERE子句中出现的两个同名属性前要加所属表名作前辍以区别，无同名则可省前辍。</p></li><li><p>自身连接</p><p>需要给表起<strong>别名</strong>以示区别，由于所有的属性名都是同名属性， 因此必须使用<strong>别名前缀</strong></p></li><li><p>外连接 <strong>Outer Join</strong></p><ul><li>左外连接：在连接的右边出现空行</li><li>右外连接：在连接的左边出现空行</li><li>左右外链接：在连接的左右出现空行</li></ul><style type=text/css>.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fa}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div><svg width="0" height="0" display="none"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice note"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"/></svg></span>Note</p><p>连接类型<br>- 内连接（INNER JOIN）<br>- 左外连接（LEFT OUTER JOIN）<br>- 右外连接（RIGHT OUTER JOIN）<br>- 全外连接（FULL OUTER JOIN）</p></div></li></ul><h3 id=嵌套查询>嵌套查询</h3><h4 id=带有in谓词的子查询>带有IN谓词的子查询</h4><h4 id=带有比较运算符的子查询>带有比较运算符的子查询</h4><ul><li>&#9888;&#xfe0f;特别注意：子查询一定要跟在比较符之后！</li></ul><h4 id=带有anysome或all谓词的查询>带有ANY(SOME)或ALL谓词的查询</h4><p><img src=https://s1.ax1x.com/2020/11/05/BWeMzd.jpg alt></p><h4 id=带有exists谓词的子查询>带有EXISTS谓词的子查询</h4><ul><li><p>EXISTS谓词的意义：</p><ul><li>是存在量词在SQL中的应用</li><li>带有EXISTS谓词的子查询不返回任何数据，只产生逻辑真值“true”或逻辑假值“false”<ul><li>若内层查询结果非空，则返回真值</li><li>若内层查询结果为空，则返回假值</li></ul></li><li>由EXISTS引出的子查询，其目标列表达式通常都用*：因为带EXISTS的子查询只返回真值或假值，给出列名无实际意义
<img src=https://s1.ax1x.com/2020/11/05/BWm9Tf.jpg alt></li></ul><p><img src=https://s1.ax1x.com/2020/11/05/BWnpv9.jpg alt></p><p><img src=https://s1.ax1x.com/2020/11/05/BWnnvd.jpg alt></p></li></ul><h4 id=嵌套查询小结>嵌套查询小结</h4><p><strong>嵌套查询分为相关子查询和不相关子查询</strong></p><ul><li>不相关子查询的执行不依赖于父查询的任何条件<ul><li>语句上不出现父查询中的属性</li><li>执行上首先运行，且只运行一次即可得到确定的结果</li><li>子查询的结果集将作为父查询的条件使用</li></ul></li><li>相关子查询的执行与父查询的当前值相关<ul><li>语句上出现父查询中的属性</li><li>执行上父查询的当前值会作为子查询的条件</li></ul></li><li>子查询的属性不会出现在父查询的输出上(Select 子句)</li><li>子查询不能使用ORDER BY子句， ORDER BY子句只能对最终结果排序</li></ul><h3 id=集合查询>集合查询</h3><p>将两个SELECT-FROM-WHERE查询块用集合操作命令联结起来的查询</p><h4 id=集合操作命令>集合操作命令</h4><ul><li>并操作（UNION）</li><li>交操作（INTERSECT）</li><li>差操作（EXCEPT）</li></ul><h4 id=语句形式>语句形式</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询块</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> [<span style=color:#66d9ef>ALL</span>] <span style=color:#f92672>|</span> <span style=color:#66d9ef>INTERSECT</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>EXCEPT</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询块</span><span style=color:#f92672>&gt;</span> ;
</span></span></code></pre></div><p><img src=https://s1.ax1x.com/2020/11/05/BWuPzQ.jpg alt></p><h2 id=数据更新>数据更新</h2><h3 id=插入数据>插入数据</h3><h4 id=插入单个元组>插入单个元组</h4><p><img src=https://s3.ax1x.com/2020/11/12/Bz4Ald.jpg alt></p><h4 id=插入子查询结果>插入子查询结果</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>INTO</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>  [(<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>属性列</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> [, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>属性列</span><span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>…</span>  )]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>子查询</span> ;
</span></span></code></pre></div><h3 id=修改数据>修改数据</h3><p><img src=https://s3.ax1x.com/2020/11/12/Bz5PH0.jpg alt></p><h3 id=删除数据>删除数据</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>WHERE</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件</span><span style=color:#f92672>&gt;</span>] ;
</span></span></code></pre></div><h3 id=注意事项>注意事项</h3><p>DBMS在执行插入、删除、修改语句时必须保证数据库的完整性和一致性。</p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] ltr:mr-1.5 rtl:ml-1.5 dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://fffzlfk.github.io/tags/sql>SQL</a><a class="mb-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] ltr:mr-1.5 rtl:ml-1.5 dark:bg-white/[8%] dark:hover:bg-white/[12%]" href=https://fffzlfk.github.io/tags/academic>Academic</a></footer><div class="giscus mt-24"></div><script src=https://giscus.app/client.js data-repo=fffzlfk/fffzlfk.github.io data-repo-id=R_kgDOG4ERGw data-category=Q&amp;A data-category-id=DIC_kwDOG4ERG84CBP5t data-mapping=pathname data-strict=1 data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class="mx-auto flex h-[4.5rem] max-w-(--w) items-center px-8 text-xs tracking-wider uppercase opacity-60"><div class=mr-auto>&copy;2025
<a class=link href=https://fffzlfk.github.io/>fffzlfk's Blog</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>powered by hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>hugo-paper</a></footer></body></html>