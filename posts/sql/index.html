<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SQL | fffzlfk's Blog</title><meta name=keywords content="SQL,Academic"><meta name=description content="SQL 语句"><meta name=author content="fffzlfk"><link rel=canonical href=https://fffzlfk.github.io/posts/sql/><link crossorigin=anonymous href=/assets/css/stylesheet.3b1cc03af9890a9e14762cb10779f50b165a8e12a4ff763213eef0019f3771fb.css integrity="sha256-OxzAOvmJCp4UdiyxB3n1CxZajhKk/3YyE+7wAZ83cfs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.ab916b8151320cc693135f5df9fe4b75e6e4754d8f0dff5782df332cacd1ba8e.js integrity="sha256-q5FrgVEyDMaTE19d+f5LdebkdU2PDf9Xgt8zLKzRuo4=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://fffzlfk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://fffzlfk.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://fffzlfk.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://fffzlfk.github.io/apple_touch_icon.png><link rel=mask-icon href=https://fffzlfk.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:title" content="SQL"><meta property="og:description" content="SQL 语句"><meta property="og:type" content="article"><meta property="og:url" content="https://fffzlfk.github.io/posts/sql/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-24T20:22:42+08:00"><meta property="article:modified_time" content="2020-10-24T20:22:42+08:00"><meta property="og:site_name" content="fffzlfk's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="SQL"><meta name=twitter:description content="SQL 语句"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://fffzlfk.github.io/posts/"},{"@type":"ListItem","position":3,"name":"SQL","item":"https://fffzlfk.github.io/posts/sql/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SQL","name":"SQL","description":"SQL 语句","keywords":["SQL","Academic"],"articleBody":"SQL概述 SQL的特点 综合统一：集DQ、DDL、DML、DCL于一体 高度非过程化：不用考虑如何实现，只需提出“做什么”，不关心“怎么做” 面向集合的操作方式：查询、插入、删除、更新操作对象及结果都是集合 以同一种语法结构提供两种使用方法：可交互式和嵌入式使用 以简捷的自然语言实现对数据库的定义、操作和控制功能：定义了少量的关键字实现对数据库的定义、操纵和控制功能 SQL所使用的动词（核心功能） SQL功能 动词 数据查询 SELECT 数据定义 CREATE, DROP, ALTER 数据操作 INSERT, UPDATE, DELETE 数据控制 GRANT, REVOKE 数据定义 SQL的数据定义语句 SQL中的数据类型 基本表的定义 创建基本表 CREATE TABLE \u003c表名\u003e ( \u003c列名\u003e \u003c数据类型\u003e[\u003c列级完整性约束条件\u003e] [, \u003c列名\u003e \u003c数据类型\u003e[\u003c列级完整性约束条件\u003e] ] … [, \u003c表级完整性约束条件\u003e ] ) ; 常用的完整性约束 主码约束：PRIMARY KEY (\u003c列名1\u003e, \u003c列名2\u003e,…) 非空值约束：NOT NULL 唯一性约束：UNIQUE 参照完整性约束：FOREIGN KEY (\u003c列名\u003e) REFERENCES \u003c表名\u003e(\u003c列名\u003e) 一般性约束：CHECK(\u003c谓词\u003e) 删除基本表 DROP TABLE \u003c表名\u003e [RESTRICT|CASCADE]; RESTRICT：删除表是有限制的：\n欲删除的基本表不能被其他表的约束所引用 如果存在依赖该表的对象，则此表不能被删除 CASCADE：级联，删除该表没有限制。 在删除基本表的同时，相关的依赖对象一起删除\n⚠️缺省是RESTRICT\n修改基本表 ALTER TABLE \u003c表名\u003e [ADD[COLUMN] \u003c新列名\u003e \u003c数据类型\u003e [ 完整性约束 ]] [ADD \u003c表级完整性约束\u003e] [DROP [ COLUMN ] \u003c列名\u003e [CASCADE|RESTRICT]] [DROP CONSTRAINT\u003c完整性约束名\u003e[RESTRICT|CASCADE]] [ALTER COLUMN\u003c列名\u003e \u003c数据类型\u003e]; \u003c表名\u003e：要修改的基本表 ADD子句：增加新列和新的完整性约束条件 DROP COLUMN子句: 用于删除表中的列 DROP CONSTRAINT子句：删除指定的完整性约束条件 ALTER COLUMN子句：用于修改列名和数据类型 ⚠️删除属性列\n间接删除(由DBA或表的Owner操作) 把表中要保留的列及其内容复制到一个新表中 删除原表 再将新表重命名为原表名 直接删除(SQL-99)\n例：ALTER TABLE S Drop Scome ; 索引的定义 索引的分类 普通索引(Normal Index)：一个索引值可能对应多条存储记录 单一索引(Unique Index)：每一个索引值只对应唯一的数据记录。 聚簇索引(Cluster Index)：基本表按照索引项顺序组织存储。 一个基本表上最多只能建立一个聚簇索引 在最经常查询的列上建立聚簇索引 经常更新的列不宜建立聚簇索引 创建索引 CREATE [UNIQUE] | [CLUSTER] INDEX \u003c索引名\u003e ON \u003c表名\u003e(\u003c列名\u003e[\u003c次序\u003e][,\u003c列名\u003e[\u003c次序\u003e] ]…); 用\u003c表名\u003e指定要建索引的基本表名字 索引可以建立在该表的一列或多列上，各列名之间用逗号分隔 用\u003c次序\u003e指定索引值的排列次序。升序：ASC，降序：DESC，缺省值：ASC UNIQUE表明此索引的每一个索引值对应唯一的数据记录 CLUSTER表示要建立的索引是聚簇索引 例7: 为学生表S和选课表SC建立索引。其中S表按学号升序建唯一索引，按年龄降序建立普通索引，SC表按学号升序和课程号降序建唯一索引。\nCREATE UNIQUE INDEX Stusno ON S (Sno); CREATE INDEX Stusage ON S (Sage DESC); CREATE UNIQUE INDEX SCno ON SC(Sno ASC, Cno DESC); 删除索引 DROP INDEX \u003c索引名\u003e;\n修改索引 ALTER INDEX \u003c旧索引名\u003e RENAME TO \u003c新索引名\u003e;\n数据查询 查询语法\nSELECT [ALL | DISTINCT] \u003c目标列表达式\u003e [,\u003c目标列表达式\u003e] … FROM \u003c表名或视图名\u003e[, \u003c表名或视图名\u003e ] … [ WHERE \u003c条件表达式\u003e ] [ GROUP BY \u003c列名1\u003e [ HAVING \u003c条件表达式\u003e ] ] [ ORDER BY \u003c列名2\u003e [ ASC | DESC ] ] ; 单表查询 目标列为表达式的查询\nSELECT Sname, 1996 - Sage FROM Student ; 使用别名改变查询结果的列标题\nSELECT Sname NAME, 'Year of Birth:' BIRTH, 1996 - Sage BIRTHYEAR, ISLOWER ( Sdept ) DEPARTMENT 消除结果中重复的行\nSELECT **DISTINCT** Sno FROM SC ; 限定查询范围\n查询条件 谓　词 比　较 = , \u003c , \u003e , \u003c= , \u003e= , \u003c\u003e , != , !\u003e , !\u003c ; NOT + 上述比较符 确定范围 BETWEEN … AND … , NOT BETWEEN … AND … 确定集合 IN, NOT IN 字符匹配 LIKE, NOT LIKE 空　值 IS NULL, IS NOT NULL 多重条件 AND, OR - 确定范围\nSELECT Sname, Sdept, Sage FROM Student WHERE Sage BETWEEN 20 AND 23 ; 确定集合\nSELECT Sname, Ssex FROM Student WHERE Sdept NOT IN ('IS', 'MA', 'CS') ; 字符串匹配\n[NOT] LIKE ‘\u003c匹配模板\u003e’ [ESCAPE ‘\u003c换码字符\u003e’] %(百分号)：代表任意长度(可以为0)的字符串。\n例：a%b表示以a开头，以b结尾的任意长度的字符串。如acb，addgb，ab 等都满足该匹配串。\n_(下横线)：代表任意单个字符。\n例：a_b表示以a开头，以b结尾的长度为3的任意字符串。如acb，afb等都满足该匹配串，一个汉字两个下横线\n当要查询的字符串本身就含有 % 或 _ 时，要使用 ESCAPE '\u003c换码字符\u003e'短语对通配符进行转义。\nSELECT Cno, Ccredit FROM Course WHERE Cname LIKE 'DB\\_Design' ESCAPE '\\' ; ;转义符‘\\’表示模板中出现在其后的第一个字符不再是通配符，而是字符本身。 涉及空值的查询\n使用谓词 IS NULL 或 IS NOT NULL，“IS NULL” 不能用 “= NULL” 代替！\n排序输出\nORDER BY 升序：ASC ，排列为空值的元组最后显示 （空值最大） 降序：DESC 聚集函数\n计数 COUNT (使用 DISTINCT 避免重复计数) 计算总和 SUM 计算平均值 AVG 求最大值 MAX 求最小值 MIN [ GROUP BY \u003c列名1\u003e[, 列名2…] [ HAVING \u003c条件表达式\u003e ] ] 未对查询结果分组，集函数将作用于整个查询结果\n对查询结果分组后，集函数将分别作用于每个组\n⚠️使用GROUP BY子句后，SELECT子句的列名表中只能出现分组属性和集函数\n集函数只能用于SELECT子句和 HAVING短语之中，而绝对不能出现在 WHERE 子句中(WHERE子句执行过程是对记录逐一检验，并没有结果集，故无法施加集函数)。\n连接查询 等值连接、自然连接\nSELECT子句和WHERE子句中出现的两个同名属性前要加所属表名作前辍以区别，无同名则可省前辍。\n自身连接\n需要给表起别名以示区别，由于所有的属性名都是同名属性， 因此必须使用别名前缀\n外连接 Outer Join\n左外连接：在连接的右边出现空行 右外连接：在连接的左边出现空行 左右外链接：在连接的左右出现空行 Note\n连接类型\n- 内连接（INNER JOIN）\n- 左外连接（LEFT OUTER JOIN）\n- 右外连接（RIGHT OUTER JOIN）\n- 全外连接（FULL OUTER JOIN）\n嵌套查询 带有IN谓词的子查询 带有比较运算符的子查询 ⚠️特别注意：子查询一定要跟在比较符之后！ 带有ANY(SOME)或ALL谓词的查询 带有EXISTS谓词的子查询 EXISTS谓词的意义：\n是存在量词在SQL中的应用 带有EXISTS谓词的子查询不返回任何数据，只产生逻辑真值“true”或逻辑假值“false” 若内层查询结果非空，则返回真值 若内层查询结果为空，则返回假值 由EXISTS引出的子查询，其目标列表达式通常都用*：因为带EXISTS的子查询只返回真值或假值，给出列名无实际意义 嵌套查询小结 嵌套查询分为相关子查询和不相关子查询\n不相关子查询的执行不依赖于父查询的任何条件 语句上不出现父查询中的属性 执行上首先运行，且只运行一次即可得到确定的结果 子查询的结果集将作为父查询的条件使用 相关子查询的执行与父查询的当前值相关 语句上出现父查询中的属性 执行上父查询的当前值会作为子查询的条件 子查询的属性不会出现在父查询的输出上(Select 子句) 子查询不能使用ORDER BY子句， ORDER BY子句只能对最终结果排序 集合查询 将两个SELECT-FROM-WHERE查询块用集合操作命令联结起来的查询\n集合操作命令 并操作（UNION） 交操作（INTERSECT） 差操作（EXCEPT） 语句形式 \u003c查询块\u003e UNION [ALL] | INTERSECT | EXCEPT \u003c查询块\u003e ; 数据更新 插入数据 插入单个元组 插入子查询结果 INSERT INTO \u003c表名\u003e [(\u003c属性列1\u003e [, \u003c属性列2\u003e… )] 子查询 ; 修改数据 删除数据 DELETE FROM \u003c表名\u003e [WHERE \u003c条件\u003e] ; 注意事项 DBMS在执行插入、删除、修改语句时必须保证数据库的完整性和一致性。\n","wordCount":"510","inLanguage":"en","datePublished":"2020-10-24T20:22:42+08:00","dateModified":"2020-10-24T20:22:42+08:00","author":{"@type":"Person","name":"fffzlfk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://fffzlfk.github.io/posts/sql/"},"publisher":{"@type":"Organization","name":"fffzlfk's Blog","logo":{"@type":"ImageObject","url":"https://fffzlfk.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://fffzlfk.github.io accesskey=h title="fffzlfk's Blog (Alt + H)"><img src=https://fffzlfk.github.io/android-chrome-512x512.png alt aria-label=logo height=35>fffzlfk's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://github.com/fffzlfk title=GitHub><span>GitHub</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://fffzlfk.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://fffzlfk.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://fffzlfk.github.io/about/ title=About><span>About</span></a></li><li><a href=https://fffzlfk.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://travellings.link/ title=Travellings><span>Travellings</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://fffzlfk.github.io>Home</a>&nbsp;»&nbsp;<a href=https://fffzlfk.github.io/posts/>Posts</a></div><h1 class=post-title>SQL</h1><div class=post-meta><span title='2020-10-24 20:22:42 +0800 +0800'>October 24, 2020</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;fffzlfk&nbsp;|&nbsp;<a href=https://github.com/fffzlfk/fffzlfk.github.io/blob/master/content/posts/SQL.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#sql%e6%a6%82%e8%bf%b0 aria-label=SQL概述>SQL概述</a><ul><li><a href=#sql%e7%9a%84%e7%89%b9%e7%82%b9 aria-label=SQL的特点>SQL的特点</a></li><li><a href=#sql%e6%89%80%e4%bd%bf%e7%94%a8%e7%9a%84%e5%8a%a8%e8%af%8d%e6%a0%b8%e5%bf%83%e5%8a%9f%e8%83%bd aria-label=SQL所使用的动词（核心功能）>SQL所使用的动词（核心功能）</a></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%ae%9a%e4%b9%89 aria-label=数据定义>数据定义</a><ul><li><a href=#sql%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ae%9a%e4%b9%89%e8%af%ad%e5%8f%a5 aria-label=SQL的数据定义语句>SQL的数据定义语句</a></li><li><a href=#sql%e4%b8%ad%e7%9a%84%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b aria-label=SQL中的数据类型>SQL中的数据类型</a></li><li><a href=#%e5%9f%ba%e6%9c%ac%e8%a1%a8%e7%9a%84%e5%ae%9a%e4%b9%89 aria-label=基本表的定义>基本表的定义</a><ul><li><a href=#%e5%88%9b%e5%bb%ba%e5%9f%ba%e6%9c%ac%e8%a1%a8 aria-label=创建基本表>创建基本表</a></li><li><a href=#%e5%88%a0%e9%99%a4%e5%9f%ba%e6%9c%ac%e8%a1%a8 aria-label=删除基本表>删除基本表</a></li><li><a href=#%e4%bf%ae%e6%94%b9%e5%9f%ba%e6%9c%ac%e8%a1%a8 aria-label=修改基本表>修改基本表</a></li></ul></li><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e5%ae%9a%e4%b9%89 aria-label=索引的定义>索引的定义</a><ul><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e5%88%86%e7%b1%bb aria-label=索引的分类>索引的分类</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e7%b4%a2%e5%bc%95 aria-label=创建索引>创建索引</a></li><li><a href=#%e5%88%a0%e9%99%a4%e7%b4%a2%e5%bc%95 aria-label=删除索引>删除索引</a></li><li><a href=#%e4%bf%ae%e6%94%b9%e7%b4%a2%e5%bc%95 aria-label=修改索引>修改索引</a></li></ul></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e6%9f%a5%e8%af%a2 aria-label=数据查询>数据查询</a><ul><li><a href=#%e5%8d%95%e8%a1%a8%e6%9f%a5%e8%af%a2 aria-label=单表查询>单表查询</a></li><li><a href=#%e8%bf%9e%e6%8e%a5%e6%9f%a5%e8%af%a2 aria-label=连接查询>连接查询</a></li><li><a href=#%e5%b5%8c%e5%a5%97%e6%9f%a5%e8%af%a2 aria-label=嵌套查询>嵌套查询</a><ul><li><a href=#%e5%b8%a6%e6%9c%89in%e8%b0%93%e8%af%8d%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2 aria-label=带有IN谓词的子查询>带有IN谓词的子查询</a></li><li><a href=#%e5%b8%a6%e6%9c%89%e6%af%94%e8%be%83%e8%bf%90%e7%ae%97%e7%ac%a6%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2 aria-label=带有比较运算符的子查询>带有比较运算符的子查询</a></li><li><a href=#%e5%b8%a6%e6%9c%89anysome%e6%88%96all%e8%b0%93%e8%af%8d%e7%9a%84%e6%9f%a5%e8%af%a2 aria-label=带有ANY(SOME)或ALL谓词的查询>带有ANY(SOME)或ALL谓词的查询</a></li><li><a href=#%e5%b8%a6%e6%9c%89exists%e8%b0%93%e8%af%8d%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2 aria-label=带有EXISTS谓词的子查询>带有EXISTS谓词的子查询</a></li><li><a href=#%e5%b5%8c%e5%a5%97%e6%9f%a5%e8%af%a2%e5%b0%8f%e7%bb%93 aria-label=嵌套查询小结>嵌套查询小结</a></li></ul></li><li><a href=#%e9%9b%86%e5%90%88%e6%9f%a5%e8%af%a2 aria-label=集合查询>集合查询</a><ul><li><a href=#%e9%9b%86%e5%90%88%e6%93%8d%e4%bd%9c%e5%91%bd%e4%bb%a4 aria-label=集合操作命令>集合操作命令</a></li><li><a href=#%e8%af%ad%e5%8f%a5%e5%bd%a2%e5%bc%8f aria-label=语句形式>语句形式</a></li></ul></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e6%9b%b4%e6%96%b0 aria-label=数据更新>数据更新</a><ul><li><a href=#%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae aria-label=插入数据>插入数据</a><ul><li><a href=#%e6%8f%92%e5%85%a5%e5%8d%95%e4%b8%aa%e5%85%83%e7%bb%84 aria-label=插入单个元组>插入单个元组</a></li><li><a href=#%e6%8f%92%e5%85%a5%e5%ad%90%e6%9f%a5%e8%af%a2%e7%bb%93%e6%9e%9c aria-label=插入子查询结果>插入子查询结果</a></li></ul></li><li><a href=#%e4%bf%ae%e6%94%b9%e6%95%b0%e6%8d%ae aria-label=修改数据>修改数据</a></li><li><a href=#%e5%88%a0%e9%99%a4%e6%95%b0%e6%8d%ae aria-label=删除数据>删除数据</a></li><li><a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label=注意事项>注意事项</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=sql概述>SQL概述<a hidden class=anchor aria-hidden=true href=#sql概述>#</a></h2><h3 id=sql的特点>SQL的特点<a hidden class=anchor aria-hidden=true href=#sql的特点>#</a></h3><ol><li><strong>综合统一</strong>：集DQ、DDL、DML、DCL于一体</li><li><strong>高度非过程化</strong>：不用考虑如何实现，只需提出“做什么”，不关心“怎么做”</li><li><strong>面向集合的操作方式</strong>：查询、插入、删除、更新操作对象及结果都是集合</li><li><strong>以同一种语法结构提供两种使用方法</strong>：可交互式和嵌入式使用</li><li><strong>以简捷的自然语言实现对数据库的定义、操作和控制功能</strong>：定义了少量的关键字实现对数据库的定义、操纵和控制功能</li></ol><h3 id=sql所使用的动词核心功能>SQL所使用的动词（核心功能）<a hidden class=anchor aria-hidden=true href=#sql所使用的动词核心功能>#</a></h3><table><thead><tr><th>SQL功能</th><th>动词</th></tr></thead><tbody><tr><td>数据查询</td><td>SELECT</td></tr><tr><td>数据定义</td><td>CREATE, DROP, ALTER</td></tr><tr><td>数据操作</td><td>INSERT, UPDATE, DELETE</td></tr><tr><td>数据控制</td><td>GRANT, REVOKE</td></tr></tbody></table><h2 id=数据定义>数据定义<a hidden class=anchor aria-hidden=true href=#数据定义>#</a></h2><h3 id=sql的数据定义语句>SQL的数据定义语句<a hidden class=anchor aria-hidden=true href=#sql的数据定义语句>#</a></h3><p><div class=render-image><img loading=lazy src=https://i.postimg.cc/3JJJHQR6/1.png alt></div></p><h3 id=sql中的数据类型>SQL中的数据类型<a hidden class=anchor aria-hidden=true href=#sql中的数据类型>#</a></h3><p><div class=render-image><img loading=lazy src=https://i.postimg.cc/BbdCGB3Q/2.png alt></div></p><h3 id=基本表的定义>基本表的定义<a hidden class=anchor aria-hidden=true href=#基本表的定义>#</a></h3><h4 id=创建基本表>创建基本表<a hidden class=anchor aria-hidden=true href=#创建基本表>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    	<span style=color:#960050;background-color:#1e0010>　</span>  ( <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列级完整性约束条件</span><span style=color:#f92672>&gt;</span>]
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>　　</span>[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列级完整性约束条件</span><span style=color:#f92672>&gt;</span>] ] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>　　</span>[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表级完整性约束条件</span><span style=color:#f92672>&gt;</span> ]  ) ;
</span></span></code></pre></div><ul><li>常用的完整性约束<ul><li>主码约束：<strong>PRIMARY KEY (&lt;列名1>, &lt;列名2>,…)</strong></li><li>非空值约束：<strong>NOT NULL</strong></li><li>唯一性约束：<strong>UNIQUE</strong></li><li>参照完整性约束：<strong>FOREIGN KEY (&lt;列名>) REFERENCES &lt;表名>(&lt;列名>)</strong></li><li>一般性约束：<strong>CHECK(&lt;谓词>)</strong></li></ul></li></ul><p><div class=render-image><img loading=lazy src=https://i.postimg.cc/k5M65Y7Y/3.png alt></div></p><h4 id=删除基本表>删除基本表<a hidden class=anchor aria-hidden=true href=#删除基本表>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span>  <span style=color:#66d9ef>TABLE</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span> [<span style=color:#66d9ef>RESTRICT</span><span style=color:#f92672>|</span><span style=color:#66d9ef>CASCADE</span>]; 
</span></span></code></pre></div><ul><li><p><strong>RESTRICT</strong>：删除表是有限制的：</p><ul><li>欲删除的基本表不能被其他表的约束所引用</li><li>如果存在依赖该表的对象，则此表不能被删除</li></ul></li><li><p><strong>CASCADE</strong>：级联，删除该表没有限制。
在删除基本表的同时，相关的依赖对象一起删除</p><p>⚠️<strong>缺省是RESTRICT</strong></p></li></ul><h4 id=修改基本表>修改基本表<a hidden class=anchor aria-hidden=true href=#修改基本表>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ADD</span>[<span style=color:#66d9ef>COLUMN</span>] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>新列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span> [ <span style=color:#960050;background-color:#1e0010>完整性约束</span> ]]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ADD</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表级完整性约束</span><span style=color:#f92672>&gt;</span>]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>DROP</span> [ <span style=color:#66d9ef>COLUMN</span> ] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> [<span style=color:#66d9ef>CASCADE</span><span style=color:#f92672>|</span><span style=color:#66d9ef>RESTRICT</span>]]
</span></span><span style=display:flex><span>    [<span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>CONSTRAINT</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>完整性约束名</span><span style=color:#f92672>&gt;</span>[<span style=color:#66d9ef>RESTRICT</span><span style=color:#f92672>|</span><span style=color:#66d9ef>CASCADE</span>]]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>COLUMN</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>数据类型</span><span style=color:#f92672>&gt;</span>];
</span></span></code></pre></div><ul><li>&lt;表名>：要修改的基本表</li><li><strong>ADD子句</strong>：增加新列和新的完整性约束条件</li><li><strong>DROP COLUMN子句</strong>: 用于删除表中的列</li><li><strong>DROP CONSTRAINT</strong>子句：删除指定的完整性约束条件</li><li><strong>ALTER COLUMN</strong>子句：用于修改列名和数据类型</li></ul><p>⚠️删除属性列</p><ul><li>间接删除(由DBA或表的Owner操作)<ol><li>把表中要保留的列及其内容复制到一个新表中</li><li>删除原表</li><li>再将新表重命名为原表名</li></ol></li><li>直接删除(SQL-99)<br>　例：ALTER TABLE S Drop Scome ;</li></ul><h3 id=索引的定义>索引的定义<a hidden class=anchor aria-hidden=true href=#索引的定义>#</a></h3><h4 id=索引的分类>索引的分类<a hidden class=anchor aria-hidden=true href=#索引的分类>#</a></h4><ol><li><strong>普通索引(Normal Index)</strong>：一个索引值可能对应多条存储记录</li><li><strong>单一索引(Unique Index)</strong>：每一个索引值只对应唯一的数据记录。</li><li><strong>聚簇索引(Cluster Index)</strong>：基本表按照索引项顺序组织存储。<ul><li>一个基本表上最多只能建立一个聚簇索引</li><li>在最经常查询的列上建立聚簇索引</li><li>经常更新的列不宜建立聚簇索引</li></ul></li></ol><h4 id=创建索引>创建索引<a hidden class=anchor aria-hidden=true href=#创建索引>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> [<span style=color:#66d9ef>UNIQUE</span>] <span style=color:#f92672>|</span> [<span style=color:#66d9ef>CLUSTER</span>] <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>索引名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span> 	<span style=color:#960050;background-color:#1e0010>　</span><span style=color:#66d9ef>ON</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>(<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>次序</span><span style=color:#f92672>&gt;</span>][,<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span>[<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>次序</span><span style=color:#f92672>&gt;</span>] ]<span style=color:#960050;background-color:#1e0010>…</span>);
</span></span></code></pre></div><ul><li>用&lt;表名>指定要建索引的基本表名字</li><li>索引可以建立在该表的一列或多列上，各列名之间用逗号分隔</li><li>用&lt;次序>指定索引值的排列次序。升序：ASC，降序：DESC，缺省值：ASC</li><li>UNIQUE表明此索引的每一个索引值对应唯一的数据记录</li><li>CLUSTER表示要建立的索引是聚簇索引</li></ul><p>例7: 为学生表S和选课表SC建立索引。其中S表按学号升序建唯一索引，按年龄降序建立普通索引，SC表按学号升序和课程号降序建唯一索引。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>INDEX</span> Stusno <span style=color:#66d9ef>ON</span> S (Sno);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> Stusage <span style=color:#66d9ef>ON</span> S (Sage <span style=color:#66d9ef>DESC</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>INDEX</span> SCno 
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>ON</span> SC(Sno <span style=color:#66d9ef>ASC</span>, Cno <span style=color:#66d9ef>DESC</span>);
</span></span></code></pre></div><h4 id=删除索引>删除索引<a hidden class=anchor aria-hidden=true href=#删除索引>#</a></h4><p><strong>DROP INDEX &lt;索引名>;</strong></p><h4 id=修改索引>修改索引<a hidden class=anchor aria-hidden=true href=#修改索引>#</a></h4><p><strong>ALTER INDEX &lt;旧索引名> RENAME TO &lt;新索引名>;</strong></p><h2 id=数据查询>数据查询<a hidden class=anchor aria-hidden=true href=#数据查询>#</a></h2><ul><li><p>查询语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> [<span style=color:#66d9ef>ALL</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DISTINCT</span>] <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>目标列表达式</span><span style=color:#f92672>&gt;</span> [,<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>目标列表达式</span><span style=color:#f92672>&gt;</span>] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名或视图名</span><span style=color:#f92672>&gt;</span>[, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名或视图名</span><span style=color:#f92672>&gt;</span> ] <span style=color:#960050;background-color:#1e0010>…</span>
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>WHERE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ]
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> [ <span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ] ]
</span></span><span style=display:flex><span>[ <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;</span> [ <span style=color:#66d9ef>ASC</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DESC</span> ] ] ;
</span></span></code></pre></div></li></ul><h3 id=单表查询>单表查询<a hidden class=anchor aria-hidden=true href=#单表查询>#</a></h3><ul><li><p>目标列为表达式的查询</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, <span style=color:#ae81ff>1996</span> <span style=color:#f92672>-</span> Sage
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student ;
</span></span></code></pre></div></li><li><p>使用别名改变查询结果的列标题</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname  NAME, <span style=color:#e6db74>&#39;Year of Birth:&#39;</span>  BIRTH,
</span></span><span style=display:flex><span>		<span style=color:#ae81ff>1996</span> <span style=color:#f92672>-</span> Sage  BIRTHYEAR, 
</span></span><span style=display:flex><span>		ISLOWER ( Sdept )  DEPARTMENT
</span></span></code></pre></div></li><li><p>消除结果中重复的行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span> <span style=color:#66d9ef>SELECT</span>  <span style=color:#f92672>**</span><span style=color:#66d9ef>DISTINCT</span><span style=color:#f92672>**</span>  Sno <span style=color:#66d9ef>FROM</span>  SC ;
</span></span></code></pre></div></li><li><p>限定查询范围</p><table><thead><tr><th>查询条件</th><th>谓　词</th></tr></thead><tbody><tr><td>比　　较</td><td>= , &lt; , > , &lt;= , >= , &lt;> , != , !> , !&lt; ; NOT + 上述比较符</td></tr><tr><td>确定范围</td><td>BETWEEN … AND … , NOT BETWEEN … AND …</td></tr><tr><td>确定集合</td><td>IN, NOT IN</td></tr><tr><td>字符匹配</td><td>LIKE, NOT LIKE</td></tr><tr><td>空　　值</td><td>IS NULL, IS NOT NULL</td></tr><tr><td>多重条件</td><td>AND, OR -</td></tr></tbody></table><ul><li><p>确定范围</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, Sdept, Sage
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Sage  <span style=color:#66d9ef>BETWEEN</span>  <span style=color:#ae81ff>20</span>  <span style=color:#66d9ef>AND</span>  <span style=color:#ae81ff>23</span> ;
</span></span></code></pre></div></li><li><p>确定集合</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Sname, Ssex
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Student
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Sdept  <span style=color:#66d9ef>NOT</span>  <span style=color:#66d9ef>IN</span> (<span style=color:#e6db74>&#39;IS&#39;</span>, <span style=color:#e6db74>&#39;MA&#39;</span>, <span style=color:#e6db74>&#39;CS&#39;</span>) ;
</span></span></code></pre></div></li><li><p>字符串匹配</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>[<span style=color:#66d9ef>NOT</span>] <span style=color:#66d9ef>LIKE</span>  <span style=color:#960050;background-color:#1e0010>‘</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>匹配模板</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>’</span>  [<span style=color:#66d9ef>ESCAPE</span> <span style=color:#960050;background-color:#1e0010>‘</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>换码字符</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>’</span>]
</span></span></code></pre></div><ul><li><p><strong>%(百分号)：代表任意长度(可以为0)的字符串。</strong></p><p>例：a%b表示以a开头，以b结尾的任意长度的字符串。如acb，addgb，ab 等都满足该匹配串。</p></li><li><p><strong>_(下横线)：代表任意单个字符。</strong></p><p>例：a_b表示以a开头，以b结尾的长度为3的任意字符串。如acb，afb等都满足该匹配串，一个汉字两个下横线</p></li><li><p><strong>当要查询的字符串本身就含有 % 或 _ 时，要使用 <code>ESCAPE '&lt;换码字符>'</code>短语对通配符进行转义。</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>  Cno, Ccredit
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  Course
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  Cname  <span style=color:#66d9ef>LIKE</span>  <span style=color:#e6db74>&#39;DB\_Design&#39;</span>  <span style=color:#66d9ef>ESCAPE</span> <span style=color:#e6db74>&#39;\&#39;</span> ;
</span></span><span style=display:flex><span>;<span style=color:#960050;background-color:#1e0010>转义符‘\’表示模板中出现在其后的第一个字符不再是通配符，而是字符本身。</span>
</span></span></code></pre></div></li></ul></li><li><p>涉及空值的查询</p><p><strong>使用谓词 IS NULL 或 IS NOT NULL，“IS NULL” 不能用 “= NULL” 代替！</strong></p></li></ul></li><li><p>排序输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
</span></span></code></pre></div><ul><li><strong>升序：ASC ，排列为空值的元组最后显示 （空值最大）</strong></li><li><strong>降序：DESC</strong></li></ul></li><li><p>聚集函数</p><ul><li>计数 COUNT (使用 DISTINCT 避免重复计数)</li><li>计算总和 SUM</li><li>计算平均值 AVG</li><li>求最大值 MAX</li><li>求最小值 MIN</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>[ <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span>[, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>…</span>] [ <span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件表达式</span><span style=color:#f92672>&gt;</span> ] ] 
</span></span></code></pre></div><p>未对查询结果分组，集函数将作用于整个查询结果</p><p>对查询结果分组后，集函数将分别作用于每个组</p><p>⚠️<strong>使用GROUP BY子句后，SELECT子句的列名表中只能出现分组属性和集函数</strong></p><p>集函数只能用于SELECT子句和 HAVING短语之中，而<strong>绝对不能出现在 WHERE 子句</strong>中(WHERE子句执行过程是对记录逐一检验，并没有结果集，故无法施加集函数)。</p><p><div class=render-image><img loading=lazy src=https://media.sumblog.cn/blog/20181223/nPMQrirY1FGp.png?imageMogr2/thumbnail/!60p alt></div></p></li></ul><h3 id=连接查询>连接查询<a hidden class=anchor aria-hidden=true href=#连接查询>#</a></h3><ul><li><p>等值连接、自然连接</p><p>SELECT子句和WHERE子句中出现的两个同名属性前要加所属表名作前辍以区别，无同名则可省前辍。</p></li><li><p>自身连接</p><p>需要给表起<strong>别名</strong>以示区别，由于所有的属性名都是同名属性， 因此必须使用<strong>别名前缀</strong></p></li><li><p>外连接 <strong>Outer Join</strong></p><ul><li>左外连接：在连接的右边出现空行</li><li>右外连接：在连接的左边出现空行</li><li>左右外链接：在连接的左右出现空行</li></ul><style type=text/css>.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fa}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice note"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"/></svg></span>Note</p><p>连接类型<br>- 内连接（INNER JOIN）<br>- 左外连接（LEFT OUTER JOIN）<br>- 右外连接（RIGHT OUTER JOIN）<br>- 全外连接（FULL OUTER JOIN）</p></div></li></ul><h3 id=嵌套查询>嵌套查询<a hidden class=anchor aria-hidden=true href=#嵌套查询>#</a></h3><h4 id=带有in谓词的子查询>带有IN谓词的子查询<a hidden class=anchor aria-hidden=true href=#带有in谓词的子查询>#</a></h4><h4 id=带有比较运算符的子查询>带有比较运算符的子查询<a hidden class=anchor aria-hidden=true href=#带有比较运算符的子查询>#</a></h4><ul><li>⚠️特别注意：子查询一定要跟在比较符之后！</li></ul><h4 id=带有anysome或all谓词的查询>带有ANY(SOME)或ALL谓词的查询<a hidden class=anchor aria-hidden=true href=#带有anysome或all谓词的查询>#</a></h4><p><div class=render-image><img loading=lazy src=https://s1.ax1x.com/2020/11/05/BWeMzd.jpg alt></div></p><h4 id=带有exists谓词的子查询>带有EXISTS谓词的子查询<a hidden class=anchor aria-hidden=true href=#带有exists谓词的子查询>#</a></h4><ul><li><p>EXISTS谓词的意义：</p><ul><li>是存在量词在SQL中的应用</li><li>带有EXISTS谓词的子查询不返回任何数据，只产生逻辑真值“true”或逻辑假值“false”<ul><li>若内层查询结果非空，则返回真值</li><li>若内层查询结果为空，则返回假值</li></ul></li><li>由EXISTS引出的子查询，其目标列表达式通常都用*：因为带EXISTS的子查询只返回真值或假值，给出列名无实际意义<div class=render-image><img loading=lazy src=https://s1.ax1x.com/2020/11/05/BWm9Tf.jpg alt></div></li></ul><p><div class=render-image><img loading=lazy src=https://s1.ax1x.com/2020/11/05/BWnpv9.jpg alt></div></p><p><div class=render-image><img loading=lazy src=https://s1.ax1x.com/2020/11/05/BWnnvd.jpg alt></div></p></li></ul><h4 id=嵌套查询小结>嵌套查询小结<a hidden class=anchor aria-hidden=true href=#嵌套查询小结>#</a></h4><p><strong>嵌套查询分为相关子查询和不相关子查询</strong></p><ul><li>不相关子查询的执行不依赖于父查询的任何条件<ul><li>语句上不出现父查询中的属性</li><li>执行上首先运行，且只运行一次即可得到确定的结果</li><li>子查询的结果集将作为父查询的条件使用</li></ul></li><li>相关子查询的执行与父查询的当前值相关<ul><li>语句上出现父查询中的属性</li><li>执行上父查询的当前值会作为子查询的条件</li></ul></li><li>子查询的属性不会出现在父查询的输出上(Select 子句)</li><li>子查询不能使用ORDER BY子句， ORDER BY子句只能对最终结果排序</li></ul><h3 id=集合查询>集合查询<a hidden class=anchor aria-hidden=true href=#集合查询>#</a></h3><p>将两个SELECT-FROM-WHERE查询块用集合操作命令联结起来的查询</p><h4 id=集合操作命令>集合操作命令<a hidden class=anchor aria-hidden=true href=#集合操作命令>#</a></h4><ul><li>并操作（UNION）</li><li>交操作（INTERSECT）</li><li>差操作（EXCEPT）</li></ul><h4 id=语句形式>语句形式<a hidden class=anchor aria-hidden=true href=#语句形式>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询块</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> [<span style=color:#66d9ef>ALL</span>] <span style=color:#f92672>|</span> <span style=color:#66d9ef>INTERSECT</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>EXCEPT</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询块</span><span style=color:#f92672>&gt;</span> ;
</span></span></code></pre></div><p><div class=render-image><img loading=lazy src=https://s1.ax1x.com/2020/11/05/BWuPzQ.jpg alt></div></p><h2 id=数据更新>数据更新<a hidden class=anchor aria-hidden=true href=#数据更新>#</a></h2><h3 id=插入数据>插入数据<a hidden class=anchor aria-hidden=true href=#插入数据>#</a></h3><h4 id=插入单个元组>插入单个元组<a hidden class=anchor aria-hidden=true href=#插入单个元组>#</a></h4><p><div class=render-image><img loading=lazy src=https://s3.ax1x.com/2020/11/12/Bz4Ald.jpg alt></div></p><h4 id=插入子查询结果>插入子查询结果<a hidden class=anchor aria-hidden=true href=#插入子查询结果>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>INTO</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>  [(<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>属性列</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> [, <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>属性列</span><span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>…</span>  )]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>子查询</span> ;
</span></span></code></pre></div><h3 id=修改数据>修改数据<a hidden class=anchor aria-hidden=true href=#修改数据>#</a></h3><p><div class=render-image><img loading=lazy src=https://s3.ax1x.com/2020/11/12/Bz5PH0.jpg alt></div></p><h3 id=删除数据>删除数据<a hidden class=anchor aria-hidden=true href=#删除数据>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>表名</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>WHERE</span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>条件</span><span style=color:#f92672>&gt;</span>] ;
</span></span></code></pre></div><h3 id=注意事项>注意事项<a hidden class=anchor aria-hidden=true href=#注意事项>#</a></h3><p>DBMS在执行插入、删除、修改语句时必须保证数据库的完整性和一致性。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://fffzlfk.github.io/tags/sql/>SQL</a></li><li><a href=https://fffzlfk.github.io/tags/academic/>Academic</a></li></ul><nav class=paginav><a class=prev href=https://fffzlfk.github.io/posts/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/><span class=title>« Prev</span><br><span>每日一题</span></a>
<a class=next href=https://fffzlfk.github.io/posts/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86/><span class=title>Next »</span><br><span>微机原理</span></a></nav></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-fffzlfk-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://fffzlfk.github.io>fffzlfk's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>